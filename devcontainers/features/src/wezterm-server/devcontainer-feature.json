{
    "name": "Wezterm Server",
    "id": "wezterm-server",
    "version": "1.1.0",
    "description": "Installs wezterm-mux-server and wezterm CLI for headless terminal multiplexing via SSH domains. Extracts binaries from platform-native packages to avoid X11/Wayland GUI dependencies.",
    "options": {
        "version": {
            "type": "string",
            "default": "20240203-110809-5046fc22",
            "description": "Wezterm release version string (e.g., 20240203-110809-5046fc22)"
        },
        "hostSshPort": {
            "type": "string",
            "default": "2222",
            "description": "Host-side SSH port for lace port allocation. Not used by install.sh -- the actual SSH listener port is determined by the sshd feature (default 2222). When used with lace, this is auto-assigned from the 22425-22499 range. TODO: Decouple SSH port handling into a thin sshd wrapper feature. The wezterm-server feature should not own SSH port metadata -- it should depend on an sshd feature that declares its own port."
        },
        "createRuntimeDir": {
            "type": "boolean",
            "default": true,
            "description": "Create /run/user/<uid> runtime directory for wezterm-mux-server (UID resolved from _REMOTE_USER)"
        }
    },
    "customizations": {
        "lace": {
            "ports": {
                "hostSshPort": {
                    "label": "wezterm ssh",
                    "onAutoForward": "silent",
                    "requireLocalPort": true
                }
            }
        }
    },
    "documentationURL": "https://github.com/weftwiseink/lace/tree/main/devcontainers/features/src/wezterm-server",
    "licenseURL": "https://github.com/weftwiseink/lace/blob/main/LICENSE",
    "installsAfter": [
        "ghcr.io/devcontainers/features/common-utils",
        "ghcr.io/devcontainers/features/sshd"
    ]
}
